
    OPERATING INSTRUCTIONS         35/1543-AVA 901 38/3 Uen C
UPG Health Check
HELPFUL?
Rate as helpful	Rate as not helpful

+0


-0
Ericsson User Profile Gateway

Contents
1	Introduction
1.1	Prerequisites
1.1.1	Documents
1.1.2	Knowledge
1.2	Related Information

2
Health Check Tasks

3
Health Check Procedure
3.1	Checking the OS Platform Version
3.2	Checking the Software Release Version
3.3	Checking Licenses
3.4	Checking the CBA Status
3.5	Checking the System Status
3.5.1	Checking the Status of SC Nodes
3.5.2	Checking the Status of PL Nodes
3.6	Checking JDV
3.7	Checking Network Status
3.8	Checking I/O Load
3.9	Checking CPU Load
3.10	Checking Memory Status
3.11	Checking Zookeeper
3.12	Checking PostgreSQL
3.13	Checking eVIP Status
3.14	Checking SSL Certificates
3.14.1	Checking the HTTPs Certificate
3.15	Checking Active Alarms
3.16	Checking Logs
3.17	Checking Backup Files

4
Problem Reporting

Reference List

1   Introduction

This document provides instructions for performing a system health check on UPG. It is recommended to perform a system health check regularly as part of the periodic maintenance activities. A system health check is also recommended before performing a system upgrade.

The document covers the areas where a periodic system health check is recommended to be performed. The document also includes information on problem reporting.

Note:
    The document does not include the solution to any problem that may occur during the health check. In case any problem occurs while performing the health check, see Section 4.


1.1   Prerequisites

This section describes the prerequisites for performing the health check procedure.
1.1.1   Documents

Before starting the health check procedure, ensure that the following documents are available:

    UPG Data Collection Guideline
    UPG Troubleshooting Guideline
    UPG System Administrators Guide
    UPG Alarm and Event List
    UPG Log Management

1.1.2   Knowledge

The personnel involved in the system health check must have basic knowledge in the following areas:

    UPG product
    SUSE Linux Operating System
    Linux Distribution Extensions (LDE)

1.2   Related Information

Trademark information, typographic conventions, and a definition and explanation of acronyms and terminology can be found in the following documents:

    UPG Trademark Information
    UPG Typographic Conventions
    UPG Glossary of Terms and Acronyms

2   Health Check Tasks

Table 1 includes a list of the items that must be checked to verify the health of the UPG system.
Table 1    Health Check Tasks

Item to Check


Instructions

OS Platform Version


Checking the OS Platform Version

Software Release Version


Checking the Software Release Version

Licenses


Checking Licenses

CBA Status


Checking the CBA Status

System Status


Checking the System Status

Network Status


Checking Network Status

Disk Usage


Checking Disk Usage

CPU Load


Checking CPU Load

Memory


Checking Memory Status

Zookeeper


Checking Zookeeper

PostgreSQL


Checking PostgreSQL

eVIP Status


Checking eVIP Status

SSL Certificates


Checking SSL Certificates

Active Alarms


Checking Active Alarms

Logs


Checking Logs

Backup Files


Checking Backup Files
3   Health Check Procedure

This section provides instructions for performing the system health check procedure.
3.1   Checking the OS Platform Version

To check the OS platform version, follow the steps below:

    Log in to one of the SC nodes.
    To check the platform version of the SUSE Linux software, execute the following command:

    # cat /etc/issue

    Example output:

    Welcome to SUSE Linux Enterprise Server 12  (x86_64) - Kernel \r (\l).

    To check the platform version of the LDE software, execute the following command:

    # cat /etc/cluster/product/version

    Example output:

    R2D01

3.2   Checking the Software Release Version

To check the UPG software release version, follow the steps below:

    Log in to one of the SC nodes.
    To check the version of all the installed RPM files, execute the following command:

    # cluster rpm --list --all

    A list of all the installed RPM files will be displayed together with the version information. For example:

    1 ldews-control-cxp9020125 4.1.3-1.sle12 ldews-control-cxp9020125-4.1.3-1.sle12.x86_64.f44f34cac8e6a2109c8fffa0d4e5bb7d.rpm
    1 coremw-common-cxp9020355 4.1.5-01.0.faa5a7f.sle12 coremw-common-cxp9020355-4.1.5-01.0.faa5a7f.sle12.x86_64.b50b2634649e54956a9adf4c2d5da153.rpm
    1 coremw-opensaf-cxp9020355 4.1.5-01.0.faa5a7f.sle12 coremw-opensaf-cxp9020355-4.1.5-01.0.faa5a7f.sle12.noarch.aaf20e4e70e6343767f19aff46b4c3b6.rpm
    ...
    1 coremw-sc-cxp9020355 4.1.5-01.0.faa5a7f.sle12 coremw-sc-cxp9020355-4.1.5-01.0.faa5a7f.sle12.x86_64.d5fabe7ce1226d7c91037fd751c961b9.rpm
    2 com-poco-cxp9028493 7.0.5-1 com-poco-cxp9028493-7.0.5-1.x86_64.72bb8ddb9c8f0f11cb0f46fffd2a39a9.rpm
    2 com-maf-cxp9028493 7.0.5-1.sle12 com-maf-cxp9028493-7.0.5-1.sle12.x86_64.d276f441daf20daf12e9aa50fb48d8d8.rpm
    2 com-maf-optional-cxp9028493 7.0.5-1.sle12 com-maf-optional-cxp9028493-7.0.5-1.sle12.x86_64.8309a9f3c48a22878698fea8f2ae3e2a.rpm
    2 com-cxp9028493 7.0.5-1 com-cxp9028493-7.0.5-1.x86_64.0aafcc89b2c710cbbc29e6321d81c61f.rpm
    2 com-util-cxp9028493 7.0.5-1 com-util-cxp9028493-7.0.5-1.x86_64.1ce9852fdabf1faf3a11102b88f51b2c.rpm
    2 com-comea-cxp9028493 7.0.5-1 com-comea-cxp9028493-7.0.5-1.x86_64.ebf6d2d6f85f9c4ae935b45b388f9b9b.rpm
    ...
    2 com-comsa-cxp9028493 7.0.5-1.sle12 com-comsa-cxp9028493-7.0.5-1.sle12.x86_64.13104921dbfa7fffa3d7c3ddd9f3a18b.rpm
    2 com-fm-cxp9028493 7.0.5-1 com-fm-cxp9028493-7.0.5-1.x86_64.00ee3208d423b3b4ffe7940411212ff6.rpm
    ...
    4 evip-base-cxp9017652 3.1.1-2.sle12 evip-base-cxp9017652-3.1.1-2.sle12.x86_64.3bf7dc5eec231f59d93b47169a6104bf.rpm
    4 evip-util-cxp9017652 3.1.1-2.sle12 evip-util-cxp9017652-3.1.1-2.sle12.x86_64.c08ac4029d27c3aa1e100ec31c12b773.rpm
    ...
    4 drill 1.7.2-0 drill-1.7.2-0.x86_64.edd149389c5358c9f0e125989b75731f.rpm
    4 Drill-LOTC-CFG R3B01-0 Drill-LOTC-CFG-R3B01-0.x86_64.e19ae2961b6a1a7da4e35845f046b961.rpm

    To check the version of all the installed components and the customer adaptation system properties, execute the following command:

    # dvemon version

    A list of all the installed components will be displayed together with the version information. For example the following list is for UPG1 R1D:

    ================================================================================================
    Name                            Node 1          Node 2          Node 3          Node 4
    ================================================================================================
    User Profile Gateway
    AVA90138_3                      R1D01           R1D01           R1D01           R1D01
    ================================================================================================
    opensaf-pm-nodedirector
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12
    ================================================================================================
    MySQL-client-advanced
    N/A                             N/A             N/A             5.6.26-1.sles11 5.6.26-1.sles11
    ================================================================================================
    DGE-LDAP-Mapping-SH-HSS
    CXC 173 2930                    N/A             N/A             R5A01-0         R5A01-0
    ================================================================================================
    com-file-management-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    ipset
    N/A                             6.21-policy     6.21-policy     6.21-policy     6.21-policy
    ================================================================================================
    mysql-connector-python
    N/A                             2.1.3-1.sles12  2.1.3-1.sles12  2.1.3-1.sles12  2.1.3-1.sles12
    ================================================================================================
    com-passwd-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    DGE-Traffic-Control
    CXC 173 1410                    R8A01-0         R8A01-0         R8A01-0         R8A01-0
    ================================================================================================
    com-cli-pipe-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    DGE-Inbound-MAP
    CXC 173 7237                    N/A             N/A             R5D01-0         R5D01-0
    ================================================================================================
    com-maf-optional-cxp9028493
    N/A                             7.0.5-1.sle12   7.0.5-1.sle12   N/A             N/A
    ================================================================================================
    expect
    N/A                             5.45-15.89      5.45-15.89      5.45-15.89      5.45-15.89
    ================================================================================================
    libnetfilter_queue1
    N/A                             1.0.2-6.59      1.0.2-6.59      1.0.2-6.59      1.0.2-6.59
    ================================================================================================
    DGE-DS-User360-Service
    CXC 173 8275                    N/A             N/A             R5D01-0         R5D01-0
    ================================================================================================
    DGE-Inbound-RG
    CXC 173 1401                    N/A             N/A             R8C01-0         R8C01-0
    ================================================================================================
    ss7caf-eabss7041-cxp9029429
    N/A                             5.0.5-05        5.0.5-05        N/A             N/A
    ================================================================================================
    ss7caf-eabss7044-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    DGE-Tools
    CXC 173 2129                    R8C01-0         R8C01-0         R8C01-0         R8C01-0
    ================================================================================================
    sec-acs-cxp9026450
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12
    ================================================================================================
    com-netconf-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    GlassFish-LOTC-CFG
    CXC 173 3629                    2.0.7.1-1       2.0.7.1-1       2.0.7.1-1       2.0.7.1-1
    ================================================================================================
    sec-ldap-sm-cxp9028981
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12
    ================================================================================================
    MySQLLOTCCFG
    CDA 102 0602                    N/A             N/A             R4A01-0         R4A01-0
    ================================================================================================
    DGE-Outbound-Diameter-SH
    CXC 173 1407                    R9A01-0         R9A01-0         R9A01-0         R9A01-0
    ================================================================================================
    lde-imm-cxp9020125
    N/A                             4.1.2-1         4.1.2-1         4.1.2-1         4.1.2-1
    ================================================================================================
    MySQL-server-advanced
    N/A                             N/A             N/A             5.6.26-1.sles11 5.6.26-1.sles11
    ================================================================================================
    GlassFish
    CXC 173 3630                    1.0.0-0         1.0.0-0         1.0.0-0         1.0.0-0
    ================================================================================================
    opensaf-amf-nodedirector
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    opensaf-amf-director
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    com-util-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    coremw-opensaf-cxp9020355
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-Outbound-TELNET
    CXC 173 6375                    R5A01-0         R5A01-0         R5A01-0         R5A01-0
    ================================================================================================
    opensaf-ntf-server
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    opensaf-smf-nodedirector
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-Inbound-LDAP
    CXC 173 2128                    N/A             N/A             R7B01-0         R7B01-0
    ================================================================================================
    DGE-LDAP-Mapping-ADMS
    CXC 173 2929                    N/A             N/A             R5A01-0         R5A01-0
    ================================================================================================
    lxc
    N/A                             0.7.5-0         0.7.5-0         0.7.5-0         0.7.5-0
    ================================================================================================
    com-maf-cxp9028493
    N/A                             7.0.5-1.sle12   7.0.5-1.sle12   N/A             N/A
    ================================================================================================
    Canal-LOTC-CFG
    CDA 102 0621                    N/A             N/A             R3C03-0         R3C03-0
    ================================================================================================
    DGE-Outbound-CAI3G
    CXC 173 7653                    R5B01-0         R5B01-0         R5B01-0         R5B01-0
    ================================================================================================
    ss7caf-eabss7053-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    ss7caf-eabss7049-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    evip-util-cxp9017652
    N/A                             3.1.1-2.sle12   3.1.1-2.sle12   3.1.1-2.sle12   3.1.1-2.sle12
    ================================================================================================
    ldews-control-cxp9020125
    N/A                             4.1.3-1.sle12   4.1.3-1.sle12   N/A             N/A
    ================================================================================================
    strongswan
    N/A                             5.2.2-2         5.2.2-2         5.2.2-2         5.2.2-2
    ================================================================================================
    sec-cert-agent-cxp9027891
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12
    ================================================================================================
    opensaf-ntf-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-Inbound-Sh
    CXC 173 7381                    N/A             N/A             R3B01-0         R3B01-0
    ================================================================================================
    DGE-DS-LDAP-CUDB
    CXC 173 2113                    R6C01-0         R6C01-0         R6C01-0         R6C01-0
    ================================================================================================
    lm-poco-cxp9020396
    N/A                             5.1.2-59.sle12  5.1.2-59.sle12  N/A             N/A
    ================================================================================================
    sec-crypto-cxp9027895
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12 2.1.2-009.sle12
    ================================================================================================
    com-pm-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    javaoam-core-cxp9030376
    N/A                             2.1.1-19        2.1.1-19        2.1.1-19        2.1.1-19
    ================================================================================================
    opensaf-log-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    coremw-sc-cxp9020355
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    opensaf-imm-director
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    opensaf-smf-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-DS-User360-Data
    CXC 173 8273                    R5D01-0         R5D01-0         R5D01-0         R5D01-0
    ================================================================================================
    ss7caf-eabss7077-cxp9029429
    N/A                             5.0.5-05        5.0.5-05        N/A             N/A
    ================================================================================================
    canal
    N/A                             N/A             N/A             1.0.22-0        1.0.22-0
    ================================================================================================
    termcap
    N/A                             2.0.8-981.18    2.0.8-981.18    N/A             N/A
    ================================================================================================
    com-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    lm-server-cxp9020396
    N/A                             5.1.2-59.sle12  5.1.2-59.sle12  N/A             N/A
    ================================================================================================
    com-cli-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    lde-scaling-cmw-cxp9020125
    N/A                             4.1.0-1         4.1.0-1         4.1.0-1         4.1.0-1
    ================================================================================================
    ipvsadm
    N/A                             1.26-5.7.10     1.26-5.7.10     1.26-5.7.10     1.26-5.7.10
    ================================================================================================
    zookeeper
    N/A                             3.4.6-0         3.4.6-0         3.4.6-0         3.4.6-0
    ================================================================================================
    com-fm-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    opensaf-smf-director
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    opensaf-clm-server
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    opensaf-ckpt-director
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    com-access-management-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    Cdf
    N/A                             CXP9050119-R3A10        CXP9050119-R3A10        CXP9050119-R3A10        CXP9050119-R3A10
    ================================================================================================
    DGE-Common
    CXC 173 1687                    R11D01-0        R11D01-0        R11D01-0        R11D01-0
    ================================================================================================
    ss7caf-eabss7039-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    opensaf-clm-nodeagent
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    com-tls-proxy-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    PostgreSQLLOTCCFG
    CDA 102 0594                    R5C03-0         N/A             N/A             N/A
    ================================================================================================
    com-tlsd-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    postgresql
    N/A                             9.2.4-0         N/A             N/A             N/A
    ================================================================================================
    lmsa-cxp9021377
    N/A                             2.1.0-18.sle12  2.1.0-18.sle12  N/A             N/A
    ================================================================================================
    opensaf-ckpt-nodedirector
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    com-sshd-manager-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    DGE-Outbound-JDBC
    CXC 173 2926                    R6A01-0         R6A01-0         R6A01-0         R6A01-0
    ================================================================================================
    User360
    CXC 173 9058                    R4D01-0         R4D01-0         R4D01-0         R4D01-0
    ================================================================================================
    ZooKeeper-LOTC-CFG
    CDA 102 0307                    R6C01-0         R6C01-0         R6C01-0         R6C01-0
    ================================================================================================
    DGE-Glassfish-Domain-DGE
    CXC 173 3765                    R7C02-0         R7C02-0         R7C02-0         R7C02-0
    ================================================================================================
    Upg-Monitor
    CXC 173 4602                    R3C01-1         R3C01-1         R3C01-1         R3C01-1
    ================================================================================================
    ss7caf-eabss7050-cxp9029429
    N/A                             5.0.5-05        5.0.5-05        5.0.5-05        5.0.5-05
    ================================================================================================
    evip-base-cxp9017652
    N/A                             3.1.1-2.sle12   3.1.1-2.sle12   3.1.1-2.sle12   3.1.1-2.sle12
    ================================================================================================
    DGE-GUI-OM
    CXC 173 1409                    R11C01-0        R11C01-0        N/A             N/A
    ================================================================================================
    opensaf-payload
    N/A                             N/A             N/A             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-DS-HTTP-ADMS
    CXC 173 1402                    R8C01-0         R8C01-0         R8C01-0         R8C01-0
    ================================================================================================
    com-subshell-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    DGE-Outbound-HTTP
    CXC 173 1405                    R9A01-0         R9A01-0         R9A01-0         R9A01-0
    ================================================================================================
    coremw-common-cxp9020355
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12
    ================================================================================================
    libnetfilter_cttimeout1
    N/A                             1.0.0-8.52      1.0.0-8.52      1.0.0-8.52      1.0.0-8.52
    ================================================================================================
    opensaf-pm-libs
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12
    ================================================================================================
    opensaf-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-DS-User360-Presentation
    CXC 173 8274                    N/A             N/A             R4C01-0         R4C01-0
    ================================================================================================
    ss7caf-eabss7069-cxp9029429
    N/A                             5.0.5-05        5.0.5-05        5.0.5-05        5.0.5-05
    ================================================================================================
    ait-ta
    N/A                             N/A             cxp9019385-1.7.0        N/A             N/A
    ================================================================================================
    opensaf-tools
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-Inbound-HTTP
    CXC 173 6373                    N/A             N/A             R6B01-0         R6B01-0
    ================================================================================================
    opensaf
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    lm-maf-cxp9020396
    N/A                             5.1.2-59.sle12  5.1.2-59.sle12  N/A             N/A
    ================================================================================================
    opensaf-log-server
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    LOTC-CFG
    CDA 102 0638                    R1B01-0         R1B01-0         R1B01-0         R1B01-0
    ================================================================================================
    ss7caf-eabss7038-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    com-comsa-cxp9028493
    N/A                             7.0.5-1.sle12   7.0.5-1.sle12   N/A             N/A
    ================================================================================================
    Drill-LOTC-CFG
    CDA 102 0616                    N/A             R3C03-0         R3C03-0         R3C03-0
    ================================================================================================
    DGE-CORE
    CXC 173 1456                    R11C02-0        R11C02-0        R11C02-0        R11C02-0
    ================================================================================================
    DGE-DS-XCAP-PGM
    CXC 173 1403                    R8C01-0         R8C01-0         R8C01-0         R8C01-0
    ================================================================================================
    opensaf-amf-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    ldews-payload-cxp9020125
    N/A                             N/A             N/A             4.1.3-1.sle12   4.1.3-1.sle12
    ================================================================================================
    DGE-Outbound-LDAPS
    CXC 173 3631                    R5A01-0         R5A01-0         R5A01-0         R5A01-0
    ================================================================================================
    DGE-LDAP-Mapping-CUDB
    CXC 173 2928                    N/A             N/A             R5A01-0         R5A01-0
    ================================================================================================
    DGE-EVIP-CFG
    CXC 173 5318                    R3B02-0         R3B02-0         R3B02-0         R3B02-0
    ================================================================================================
    DGE-Outbound-FTP
    CXC 173 2927                    R6A01-0         R6A01-0         R6A01-0         R6A01-0
    ================================================================================================
    opensaf-imm-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    opensaf-pm-director
    N/A                             4.1.5-01.0.faa5a7f.sle12        4.1.5-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    FreshDB-LOTC-CFG
    CDA 102 0617                    N/A             R3C02-0         N/A             N/A
    ================================================================================================
    DGE-Outbound-SSH
    CXC 173 7556                    R6A01-0         R6A01-0         R6A01-0         R6A01-0
    ================================================================================================
    sec-secm-cxp9028976
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 N/A             N/A
    ================================================================================================
    drill
    N/A                             N/A             1.7.2-0         1.7.2-0         1.7.2-0
    ================================================================================================
    sec-ldap-cxp9028981
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 N/A             N/A
    ================================================================================================
    DGE-DS-VoLTE-SSS
    CXC 173 7626                    R5C01-0         R5C01-0         R5C01-0         R5C01-0
    ================================================================================================
    lm-client-library-cxp9020396
    N/A                             5.1.2-59.sle12  5.1.2-59.sle12  5.1.2-59.sle12  5.1.2-59.sle12
    ================================================================================================
    conntrack-tools
    N/A                             1.4.2-3.62      1.4.2-3.62      1.4.2-3.62      1.4.2-3.62
    ================================================================================================
    com-poco-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    opensaf-ckpt-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DiameterService
    CXC 173 7550                    N/A             N/A             R5B01-0         R5B01-0
    ================================================================================================
    sec-cert-manager-cxp9027891
    N/A                             2.1.2-009.sle12 2.1.2-009.sle12 N/A             N/A
    ================================================================================================
    ss7caf-eabss7052-cxp9029429
    N/A                             N/A             N/A             5.0.5-05        5.0.5-05
    ================================================================================================
    opensaf-clm-libs
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    DGE-Outbound-LDAP
    CXC 173 1451                    R9A01-0         R9A01-0         R9A01-0         R9A01-0
    ================================================================================================
    mysql-advanced
    N/A                             N/A             5.7.11-0        N/A             N/A
    ================================================================================================
    opensaf-controller
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        N/A             N/A
    ================================================================================================
    ss7caf-eabss7072-cxp9029429
    N/A                             5.0.5-05        5.0.5-05        5.0.5-05        5.0.5-05
    ================================================================================================
    com-comea-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    opensaf-imm-nodedirector
    N/A                             5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12        5.0.0-01.0.faa5a7f.sle12
    ================================================================================================
    jdk
    N/A                             2000-1.7.0_131  2000-1.7.0_131  2000-1.7.0_131  2000-1.7.0_131
    ================================================================================================
    ers
    N/A                             5_R1AL-0        5_R1AL-0        5_R1AL-0        5_R1AL-0
    ================================================================================================
    com-notification-service-cxp9028493
    N/A                             7.0.5-1         7.0.5-1         N/A             N/A
    ================================================================================================
    libnetfilter_cthelper0
    N/A                             1.0.0-6.55      1.0.0-6.55      1.0.0-6.55      1.0.0-6.55
    No Customer Adaptations will be listed!

3.3   Checking Licenses

For more information on checking the licenses, refer to the section View License Information in UPG License Management.
3.4   Checking the CBA Status

To check the CBA status, execute the following command:

# cmw-status node su comp si

Example check result:

SC-1:~ # cmw-status node su comp si
Status OK

3.5   Checking the System Status

This section provides instructions for checking the status of processes running in the UPG system.
3.5.1   Checking the Status of SC Nodes

To check the status of the processes running on the SC nodes, execute the following command on each SC node:

SC-1:/ # dvemon status

Example output:

========================
   Application Server
========================
dge-domain running
GUI port(6262) enabled
SSL GUI port(6363) enabled
========================
     POSTGRESQL
========================
PostgreSQL is running
========================
      ZOOKEEPER
========================
ZooKeeper is running

Note:
    The output of PostgreSQL stauts is only displayed on SC-1.


It is also possible to display the status information of all SC and PL nodes in the cluster at the same time, using the following command:

# dvemon status -a
3.5.2   Checking the Status of PL Nodes

To check the status of the processes running on the PL nodes, execute the following command on each PL node:

# dvemon status

Example output:

========================
   Application Server
========================
dge-domain running
Traffic port(6060) enabled
Traffic SSL port(6161) enabled
Provision port(6262) enabled
Provision SSL port(6363) enabled
LDAP traffic port(6389) enabled
LDAPS traffic port(6636) enabled
MAP traffic is enabled
Diameter Sh traffic is enabled
========================
      ZOOKEEPER
========================
ZooKeeper is running
========================
  CockpitDataCollection
========================
CDC is running
========================
      SS7 CAF
========================
SS7 CAF is running

Note:

        Zookeeper is installed on the first PL node. The Zookeeper status information is only included in the printout of the first PL node.

        In case SS7 is not installed in the system, the status information in the printout will indicate "SS7 CAF is not running".

        In case MAP traffic is not enabled in the system, the status information in the printout will indicate "MAP traffic is disabled".

        In case Diameter Sh traffic is not enabled in the system, the status information in the printout will indicate "Diameter Sh traffic is disabled".

        The output of CockpitDataCollection stauts is only displayed on PL nodes.


The Application Server section in the printout provides the status of the GlassFish Server processes and the traffic ports.

    To start or stop the dge-domain process, see UPG System Administrators Guide.
    To enable or disable traffic ports, see UPG System Administrators Guide.

It is also possible to display the status information of all SC and PL nodes in the cluster at the same time, using the following command:

# dvemon status -a
3.6   Checking JDV

The /home/asuser/nodes/<node_ID>/domains/dge-domain/config/dve/deploy directory cannot contain any files ending in .bad. If the directory contains any such files, remove the files and copy them again to the deploy folder.
3.7   Checking Network Status

To check the network status, follow the steps below:

    To check the network load on a network interface, use the netstat command. For example:

    # netstat -i

    Example output for SC-1:

    Kernel Interface table
    Iface   MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
    bond0            1500   0 262977917      0 42173428      0 194566312      0      0      0 BMmRU
    bond0.603        1500   0  7688862      0      0      0  4499017      0      0      0 BMRU
    bond0:1          1500   0     - no statistics available -                        BMmRU
    e_mysql_alb      1452   0        0      0      0      0        0      0      0      0 OPRU
    e_oam_alb        1452   0    10039      0      0      0    13228      0      0      0 OPRU
    eth3             1500   0    25262      0      0      0    23895      0      0      0 BMRU
    eth3.53          1500   0     6559      0      0      0     5185      0      0      0 BMRU
    eth3:1           1500   0     - no statistics available -                        BMRU
    eth4             1500   0    21619      0      0      0    20711      0      0      0 BMRU
    eth4.63          1500   0     2904      0      0      0     2005      0      0      0 BMRU
    eth4:1           1500   0     - no statistics available -                        BMRU
    eth5             1500   0 214574967      0    102      0 189413958      0      0      0 BMsRU
    eth5.33          1500   0  5156247      0      0      0  5121921      0      0      0 BMRU
    eth6             1500   0 48402953      0 42173326      0  5152356      0      0      0 BMsRU
    eth6.43          1500   0  6229521      0      0      0  5152286      0      0      0 BMRU
    evip_macvlan0    1500   0 32510617      0      0      0  1343981      0      0      0 BMRU
    lo              65536   0 78036408      0      0      0 78036408      0      0      0 LRU

    Example output for PL-3:

    Kernel Interface table
    Iface   MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
    bond0            1500   0 220318140      0 42176679      0 137423198      0      0      0 BMmRU
    e_ldap_alb       1452   0        0      0      0      0        0      0      0      0 OPRU
    e_mysql_alb      1452   0        0      0      0      0        0      0      0      0 OPRU
    e_prov_alb       1452   0  3813490      0      0      0  4471385      0      0      0 OPRU
    e_tr_alb         1452   0        0      0      0      0        0      0      0      0 OPRU
    eth3             1500   0        1      0      0      0       10      0      0      0 BMRU
    eth4             1500   0       24      0      0      0       40      0      0      0 BMRU
    eth5             1500   0 172073206      0     30      0 132407494      0      0      0 BMsRU
    eth5.33          1500   0  5154727      0      4      0  5122913      0      0      0 BMRU
    eth6             1500   0 48244934      0 42176649      0  5015704      0      0      0 BMsRU
    eth6.43          1500   0  6068273      0      4      0  5015702      0      0      0 BMRU
    evip_macvlan0    1500   0 36837200      0      0      0  6970051      0      0      0 BMRU
    lo              65536   0 42435750      0      0      0 42435750      0      0      0 LRU

    Check the RX-ERR column in the output and make sure that there are as few errors as possible.
    To output the header of all packets on a network interface that match a specified expression, use the tcpdump command. For example:

    # tcpdump -i bond0 -s 0 port 6060

    This example prints all the packets that are sent and received over port 6060.

3.8   Checking I/O Load

To check the I/O load, use the iostat command. For example:

# iostat -d -x

This example retrieves all input and output statistics for devices and partitions.
3.9   Checking CPU Load

To check the CPU load, use the mpstat command. For example:

# mpstat -P ALL

This example outputs processor related statistics.
3.10   Checking Memory Status

To check the system memory status, use the free command. For example:

# free -m
3.11   Checking Zookeeper

To check the status of the Zookeeper database on the two SCs and on the first PL node, execute the following command on all three nodes one by one:

# /opt/zookeeper/bin/zkCli.sh -server <SC1_internal_ip>:6181,<SC2_internal_ip>:6181,<PL3_internal_ip>:6181

Example output:

[zk: localhost:6181(CONNECTED) 0]

Verify that the output includes CONNECTED as indicated in the example above.

With "inet addr" of bond0 in the ifconfig printout, users can find out the SC/PL internal IP address.

For example:

SC-1:~ # ifconfig

SC-1:~ # ifconfig
bond0     Link encap:Ethernet  HWaddr 00:13:5E:EA:29:5A
          inet addr:169.254.221.1  Bcast:169.254.221.255  Mask:255.255.255.0
          inet6 addr: fe80::213:5eff:feea:295a/64 Scope:Link
          UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1
          RX packets:28130301 errors:0 dropped:325252 overruns:0 frame:0
          TX packets:20806614 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:36387070079 (34701.4 Mb)  TX bytes:24291843386 (23166.5 Mb)

3.12   Checking PostgreSQL

To check the status of the PostgreSQL database on the first SC-1 node:

#su - postgres

postgres@SC-1:~>pg_ctl status

Example output:

pg_ctl: server is running (PID: 16271)
/opt/dve/postgresql/bin/postgres "-D" "/var/postgresql/data"

Verify that the output includes running as indicated in the example above.
3.13   Checking eVIP Status

eVIP publishes a CLI which can be used for status checking. The CLI can be used on SCs and PL nodes.

To check the eVIP status, follow the steps below:

    Log in to the CLI:

    # telnet `/opt/vip/bin/getactivecontrol` 25190
    Check the overall eVIP status:

    EVIP> show evip-status

    The following is displayed:

    STATUS OK

    Check the ALB status on the SC:

    EVIP> show agents
    show agent e_prov_alb

    Example output:

    +-------------------------[ ALB e_oam_alb (ACTIVE) ]-------------------------+
    +------------------------------------- PN -----------------------------------+
    | pnagent (4)                           | lbesel_pn (18)                     |
    |[2] fe80::ff:fe01:e : ACTIVE           |[2] fe80::ff:fe01:e : ACTIVE        |
    |[1] fe80::ff:fe01:b : ACTIVE           |[1] fe80::ff:fe01:b : ACTIVE        |
    +----------------------------------------------------------------------------+
    | ersipc (0)                            | repdb (18)                         |
    |[2] fe80::ff:fe01:e : ACTIVE           |[2] fe80::ff:fe01:e : ACTIVE        |
    |[1] fe80::ff:fe01:b : ACTIVE           |[1] fe80::ff:fe01:b : ACTIVE        |
    +------------------------------------- LBE ----------------------------------+
    | lbeagent (38)                         | sesel_lbe (6)                      |
    |[2] fe80::1:f4ff:fe01:4 : ACTIVE       |[2] fe80::1:f4ff:fe01:4 : ACTIVE    |
    |[1] fe80::1:f4ff:fe01:3 : ACTIVE       |[1] fe80::1:f4ff:fe01:3 : ACTIVE    |
    +------------------------------------- FE -----------------------------------+
    | feeagent (24)                         | lbesel_fe (18)                     |
    |[2] fe80::1:f6ff:fe01:9 : ACTIVE UP    |[2] fe80::1:f6ff:fe01:9 : ACTIVE    |
    |[1] fe80::1:f6ff:fe01:7 : ACTIVE UP    |[1] fe80::1:f6ff:fe01:7 : ACTIVE    |
    +----------------------------------------------------------------------------+
    | sesel_fe (6)                          |                                    |
    |[2] fe80::1:f6ff:fe01:9 : ACTIVE       |                                    |
    |[1] fe80::1:f6ff:fe01:7 : ACTIVE       |                                    |
    +------------------------------------- SE -----------------------------------+
    | seagent (14)                          | lbesel_se (22)                     |
    |[2] fe80::1:f5ff:fe01:6 : ACTIVE RDY   |[2] fe80::1:f5ff:fe01:6 : ACTIVE    |
    |[1] fe80::1:f5ff:fe01:5 : ACTIVE RDY   |[1] fe80::1:f5ff:fe01:5 : ACTIVE    |
    +----------------------------------------------------------------------------+
    | sesel_se (4)                          |                                    |
    |[2] fe80::1:f5ff:fe01:6 : ACTIVE       |                                    |
    |[1] fe80::1:f5ff:fe01:5 : ACTIVE       |                                    |
    +------------------------------------ IPSEC ---------------------------------+
    | ikeagent (0)                          | ipsecuagent (8)                    |
    |                                       |[2] fe80::ff:fe01:10 : ACTIVE RDY   |
    |                                       |[1] fe80::ff:fe01:d : ACTIVE RDY    |
    +----------------------------------- XALBSEL --------------------------------+
    | xalbsel (4)                           |                                    |
    |[2] fe80::ff:fe01:f : ACTIVE           |                                    |
    |[1] fe80::ff:fe01:c : ACTIVE           |                                    |
    +----------------------------------------------------------------------------+
    +----------------------------------------------------------------------------+
              eRSIP state: ACTIVE                cIPSEC state: ACTIVE RDY

    Make sure that no DISCONNECTED status can be found in the printout.
    Repeat the procedure above on each PL node.

3.14   Checking SSL Certificates

Certificates for SSL verification are time limited. To check the validity of the installed SSL certificates, follow the steps below:

    Move to the following directory:

    # cd /home/asuser/nodes/<node_id>/domains/dge-domain/config/
    Execute the following command:

    # /usr/java/jdk1.7.0_101/bin/keytool -list -v -keystore <key_filename> -storepass <password>

    Note:
            <key_filename> is the keystore certificate file name. For details about the keystore certificate, see "Preparation" of "Configuring SSL" in UPG System Administrators Guide.
            <password> must be the same as the keystore master password. For details about the keystore master password, see "Preparation" of "Configuring SSL" in UPG System Administrators Guide.


    The validity of the SSL certificates is displayed.
    In case new certificates must be configured, refer to UPG System Administrators Guide.

3.14.1   Checking the HTTPs Certificate

To check HTTPs certificate information, follow the steps below:

    Open the following URL in browser (such as IE) and log in to the UPG GUI:

    https://<OaM_IP>:6363/management
    Click Continue to this website (not recommended).
    Right-click on the web page and select Properties from the drop-down menu.
    Click Certificates to display the HTTPs certificate information.

3.15   Checking Active Alarms

To check the active alarms in the UPG system, see the following documents:

    Check Alarm Status Using ECLI
    Check Alarm Status Using NETCONF

For more information about alarms, see UPG Alarm and Event List.
3.16   Checking Logs

To check the log files in the UPG system, go to the following folder and check the content of all the sub-folders:

    /var/log

For more information on the log files in the UPG system, see UPG Log Management.
3.17   Checking Backup Files

Check whether all the backup files are created according to the backup configuration. To check the scheduled backup setup and the backup configuration, see UPG Backup and Restore.
4   Problem Reporting

In case an abnormal situation occurs, see UPG Troubleshooting Guideline.

If the problem still exists, report it to the next level of support or create a Customer Service Request (CSR).

When reporting the problem to the next level of support, ensure that all the related data and log files are recorded.

For more information on how to collect data and log files, see UPG Data Collection Guideline.

Reference List
[1] UPG Trademark Information.
[2] UPG Typographic Conventions.
[3] UPG Glossary of Terms and Acronyms.
[4] UPG System Administrators Guide.
[5] UPG Troubleshooting Guideline.
[6] UPG Data Collection Guideline.
[7] UPG Alarm and Event List.
[8] Check Alarm Status Using ECLI.
[9] Check Alarm Status Using NETCONF.
[10] UPG Log Management.
[11] UPG Backup and Restore.
[12] UPG License Management.


Copyright

© Ericsson AB 2016, 2017. All rights reserved. No part of this document may be reproduced in any form without the written permission of the copyright owner.
Disclaimer

The contents of this document are subject to revision without notice due to continued progress in methodology, design and manufacturing. Ericsson shall have no liability for any error or damage of any kind resulting from the use of this document.
Trademark List
Ericsson	 	is the trademark or registered trademark of Telefonaktiebolaget LM Ericsson.
All other products or service names mentioned in this document are trademarks of their respective companies.

    UPG Health Check         Ericsson User Profile Gateway
    UPG Health Check         Ericsson User Profile Gateway
